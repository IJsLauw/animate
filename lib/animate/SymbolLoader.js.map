{"version":3,"sources":["../../src/animate/SymbolLoader.js"],"names":["SymbolLoader","resource","next","url","data","search","add","name","nodeName","PIXI","Texture","addTextureToCache","fromFrame","loaders","Loader","addPixiMiddleware"],"mappings":";;;;AAAA;;;;;;AAEA;;;;;;;AAOA,IAAIA,eAAe,SAAfA,YAAe,GAAW;AAC1B,WAAO,UAASC,QAAT,EAAmBC,IAAnB,EAAyB;AAC5B,YAAIC,MAAMF,SAASE,GAAnB;AACA,YAAIC,OAAOH,SAASG,IAApB;;AAEA,YAAI,CAACA,IAAL,EAAW;AACPF;AACH,SAFD,MAEO,IAAIC,IAAIE,MAAJ,CAAW,wBAAX,IAAuC,CAAC,CAA5C,EAA+C;AAClD,kCAAYC,GAAZ,CAAgBL,SAASM,IAAzB,EAA+BH,IAA/B;AACH,SAFM,MAEA,IAAIA,KAAKI,QAAL,IAAiBJ,KAAKI,QAAL,KAAkB,KAAvC,EAA8C;AACjD;AACA;AACAC,iBAAKC,OAAL,CAAaC,iBAAb,CACIF,KAAKC,OAAL,CAAaE,SAAb,CAAuBT,GAAvB,CADJ,EAEIF,SAASM,IAFb;AAIH;AACDL;AACH,KAjBD;AAkBH,CAnBD;;AAqBA;AACAO,KAAKI,OAAL,CAAaC,MAAb,CAAoBC,iBAApB,CAAsCf,YAAtC;;kBAEeA,Y","file":"SymbolLoader.js","sourcesContent":["import ShapesCache from './ShapesCache';\n\n/**\n * The middleware for PIXI's ResourceLoader to be able to \n * load Flash symbols such as graphics and images.\n * @memberof PIXI.animate\n * @class SymbolLoader\n * @private\n */\nlet SymbolLoader = function() {\n    return function(resource, next) {\n        let url = resource.url;\n        let data = resource.data;\n\n        if (!data) {\n            next();\n        } else if (url.search(/\\.shapes\\.(json|txt)$/i) > -1) {\n            ShapesCache.add(resource.name, data);\n        } else if (data.nodeName && data.nodeName === 'IMG') {\n            // Add individual images to the texture cache by their\n            // short symbol name, not the URL\n            PIXI.Texture.addTextureToCache(\n                PIXI.Texture.fromFrame(url),\n                resource.name\n            );\n        }\n        next();\n    };\n};\n\n// Assign to the loader\nPIXI.loaders.Loader.addPixiMiddleware(SymbolLoader);\n\nexport default SymbolLoader;"]}